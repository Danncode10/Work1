# Version 1.3.2.1: Set up AWS Cognito User Pool and App Client

## Date
12/19/2025

## What We Did

### Environment Setup
- ✅ Created AWS Cognito User Pool using the new setup wizard
- ✅ Configured user pool for single-page application (SPA) with email-based authentication
- ✅ Enabled self-registration for optional user sign-up
- ✅ Created app client for API-based authentication integration

### Documentation Updates
- ✅ Updated `.env.example` with actual Cognito User Pool ID and Client ID (values redacted for security)

### Files Created/Modified
- Modified `.env.example` - Added real AWS Cognito credentials for development

## Detailed Explanations

### AWS Cognito User Pool Creation
We used AWS's new Cognito setup wizard to create a user pool specifically configured for our Natural Health application. The wizard guides you through setting up authentication for different application types.

- **Application Type**: Selected "Single-page application (SPA)" since our frontend is built with React
- **Application Name**: "Natural Health App" - a clear identifier for our application
- **Sign-in Identifiers**: Configured to use email addresses only, following our SRS requirement for email/password authentication
- **Self-Registration**: Enabled this feature so users can optionally create accounts through the profile section
- **Required Attributes**: Set email as the only required attribute for user registration

### User Pool Configuration
The wizard automatically created a user pool with appropriate default settings:
- **User Pool Name**: Auto-generated (e.g., "User pool - [random suffix]")
- **Password Policy**: Standard AWS Cognito defaults (8+ characters, mix of types)
- **MFA**: Not enabled (keeps authentication simple for Version 1)
- **Email Delivery**: Uses Amazon SES for sending verification emails

### App Client Creation
The wizard also created an app client automatically:
- **Client Type**: Public client (suitable for SPA applications)
- **Client Secret**: Not generated (not needed for public clients)
- **OAuth Scopes**: Configured for basic authentication (openid, email, profile)
- **Redirect URIs**: Placeholder URLs (can be configured later for hosted UI if needed)

### Environment Variables Update
Updated the `.env.example` template with the actual User Pool ID and Client ID obtained from the AWS console. These IDs are unique identifiers that our FastAPI backend will use to communicate with AWS Cognito for user authentication operations like registration and login.

### Why This Setup?
This configuration perfectly matches our SRS requirements:
- Optional authentication (self-registration enabled)
- Email/password login (email as sign-in identifier)
- Simple setup for Version 1 (no advanced features like MFA or social logins)
- Ready for API integration (app client configured for backend use)

## Usage Instructions

### Configuration
1. Copy `.env.example` to `.env` for local development
2. The Cognito IDs are now populated and ready for use
3. Backend will read these values automatically via pydantic-settings

### Testing User Pool
- Visit AWS Cognito console to see the created user pool
- Test user registration by going to the user pool's sign-in page (optional)
- Note the User Pool ID and Client ID for any manual API testing

### Security Notes
- Never commit actual Cognito IDs to version control
- Use separate user pools for development, staging, and production environments
- The IDs in `.env.example` are for development only

## Current Status
- AWS Cognito User Pool fully configured and operational
- App client created with appropriate permissions
- Environment variables updated and ready for backend integration
- Authentication infrastructure ready for API development

## Next Steps
- Install boto3 and other AWS SDK dependencies for Python
- Create authentication service module in backend
- Implement `/auth/register` and `/auth/login` API endpoints
- Add token validation middleware for protected routes
